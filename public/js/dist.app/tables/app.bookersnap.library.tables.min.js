
angular.module("ngDraggable",[]).service('ngDraggable',[function(){var scope=this;scope.inputEvent=function(event){if(angular.isDefined(event.touches)){return event.touches[0];}
else if(angular.isDefined(event.originalEvent)&&angular.isDefined(event.originalEvent.touches)){return event.originalEvent.touches[0];}
return event;};}]).directive('ngDrag',['$rootScope','$parse','$document','$window','ngDraggable',function($rootScope,$parse,$document,$window,ngDraggable){return{restrict:'A',link:function(scope,element,attrs){scope.value=attrs.ngDrag;var offset,_centerAnchor=false,_mx,_my,_tx,_ty,_mrx,_mry;var _hasTouch=('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch;var _pressEvents='touchstart mousedown';var _moveEvents='touchmove mousemove';var _releaseEvents='touchend mouseup';var _dragHandle;var _myid=scope.$id;var _data=null;var _dragOffset=null;var _dragEnabled=false;var _pressTimer=null;var onDragStartCallback=$parse(attrs.ngDragStart)||null;var onDragStopCallback=$parse(attrs.ngDragStop)||null;var onDragSuccessCallback=$parse(attrs.ngDragSuccess)||null;var allowTransform=angular.isDefined(attrs.allowTransform)?scope.$eval(attrs.allowTransform):true;var getDragData=$parse(attrs.ngDragData);var _deregisterRootMoveListener=angular.noop;var initialize=function(){element.attr('draggable','false');if(element[0].querySelectorAll){var dragHandles=angular.element(element[0].querySelectorAll('[ng-drag-handle]'));}else{var dragHandles=element.find('[ng-drag-handle]');}
if(dragHandles.length){_dragHandle=dragHandles;}
toggleListeners(true);};var toggleListeners=function(enable){if(!enable)return;scope.$on('$destroy',onDestroy);scope.$watch(attrs.ngDrag,onEnableChange);scope.$watch(attrs.ngCenterAnchor,onCenterAnchor);if(_dragHandle){_dragHandle.on(_pressEvents,onpress);}else{element.on(_pressEvents,onpress);}
if(!_hasTouch&&element[0].nodeName.toLowerCase()=="img"){element.on('mousedown',function(){return false;});}};var onDestroy=function(enable){toggleListeners(false);};var onEnableChange=function(newVal,oldVal){_dragEnabled=(newVal);};var onCenterAnchor=function(newVal,oldVal){if(angular.isDefined(newVal))
_centerAnchor=(newVal||'true');};var isClickableElement=function(evt){return(angular.isDefined(angular.element(evt.target).attr("ng-cancel-drag")));};var onpress=function(evt){if(!_dragEnabled)return;if(isClickableElement(evt)){return;}
if(evt.type=="mousedown"&&evt.button!=0){return;}
if(_hasTouch){cancelPress();_pressTimer=setTimeout(function(){cancelPress();onlongpress(evt);},100);$document.on(_moveEvents,cancelPress);$document.on(_releaseEvents,cancelPress);}else{onlongpress(evt);}};var cancelPress=function(){clearTimeout(_pressTimer);$document.off(_moveEvents,cancelPress);$document.off(_releaseEvents,cancelPress);};var onlongpress=function(evt){if(!_dragEnabled)return;evt.preventDefault();offset=element[0].getBoundingClientRect();if(allowTransform)
_dragOffset=offset;else{_dragOffset={left:document.body.scrollLeft,top:document.body.scrollTop};}
element.centerX=element[0].offsetWidth/2;element.centerY=element[0].offsetHeight/2;_mx=ngDraggable.inputEvent(evt).pageX;_my=ngDraggable.inputEvent(evt).pageY;_mrx=_mx-offset.left;_mry=_my-offset.top;if(_centerAnchor){_tx=_mx-element.centerX-$window.pageXOffset;_ty=_my-element.centerY-$window.pageYOffset;}else{_tx=_mx-_mrx-$window.pageXOffset;_ty=_my-_mry-$window.pageYOffset;}
$document.on(_moveEvents,onmove);$document.on(_releaseEvents,onrelease);_deregisterRootMoveListener=$rootScope.$on('draggable:_triggerHandlerMove',function(event,origEvent){onmove(origEvent);});};var onmove=function(evt){if(!_dragEnabled)return;evt.preventDefault();if(!element.hasClass('dragging')){_data=getDragData(scope);element.addClass('dragging');$rootScope.$broadcast('draggable:start',{x:_mx,y:_my,tx:_tx,ty:_ty,event:evt,element:element,data:_data});if(onDragStartCallback){scope.$apply(function(){onDragStartCallback(scope,{$data:_data,$event:evt});});}}
_mx=ngDraggable.inputEvent(evt).pageX;_my=ngDraggable.inputEvent(evt).pageY;if(_centerAnchor){_tx=_mx-element.centerX-_dragOffset.left;_ty=_my-element.centerY-_dragOffset.top;}else{_tx=_mx-_mrx-_dragOffset.left;_ty=_my-_mry-_dragOffset.top;}
moveElement(_tx,_ty);$rootScope.$broadcast('draggable:move',{x:_mx,y:_my,tx:_tx,ty:_ty,event:evt,element:element,data:_data,uid:_myid,dragOffset:_dragOffset});};var onrelease=function(evt){if(!_dragEnabled)
return;evt.preventDefault();$rootScope.$broadcast('draggable:end',{x:_mx,y:_my,tx:_tx,ty:_ty,event:evt,element:element,data:_data,callback:onDragComplete,uid:_myid});element.removeClass('dragging');element.parent().find('.drag-enter').removeClass('drag-enter');reset();$document.off(_moveEvents,onmove);$document.off(_releaseEvents,onrelease);if(onDragStopCallback){scope.$apply(function(){onDragStopCallback(scope,{$data:_data,$event:evt});});}
_deregisterRootMoveListener();};var onDragComplete=function(evt){if(!onDragSuccessCallback)return;scope.$apply(function(){onDragSuccessCallback(scope,{$data:_data,$event:evt});});};var reset=function(){if(allowTransform)
element.css({transform:'','z-index':'','-webkit-transform':'','-ms-transform':''});else
element.css({'position':'',top:'',left:''});};var moveElement=function(x,y){if(allowTransform){element.css({transform:'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, '+x+', '+y+', 0, 1)','z-index':99999,'-webkit-transform':'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, '+x+', '+y+', 0, 1)','-ms-transform':'matrix(1, 0, 0, 1, '+x+', '+y+')'});}else{element.css({'left':x+'px','top':y+'px','position':'fixed'});}};initialize();}};}]).directive('ngDrop',['$parse','$timeout','$window','$document','ngDraggable',function($parse,$timeout,$window,$document,ngDraggable){return{restrict:'A',link:function(scope,element,attrs){scope.value=attrs.ngDrop;scope.isTouching=false;var _lastDropTouch=null;var _myid=scope.$id;var _dropEnabled=false;var onDropCallback=$parse(attrs.ngDropSuccess);var onDragStartCallback=$parse(attrs.ngDragStart);var onDragStopCallback=$parse(attrs.ngDragStop);var onDragMoveCallback=$parse(attrs.ngDragMove);var initialize=function(){toggleListeners(true);};var toggleListeners=function(enable){if(!enable)return;scope.$watch(attrs.ngDrop,onEnableChange);scope.$on('$destroy',onDestroy);scope.$on('draggable:start',onDragStart);scope.$on('draggable:move',onDragMove);scope.$on('draggable:end',onDragEnd);};var onDestroy=function(enable){toggleListeners(false);};var onEnableChange=function(newVal,oldVal){_dropEnabled=newVal;};var onDragStart=function(evt,obj){if(!_dropEnabled)return;isTouching(obj.x,obj.y,obj.element);if(attrs.ngDragStart){$timeout(function(){onDragStartCallback(scope,{$data:obj.data,$event:obj});});}};var onDragMove=function(evt,obj){if(!_dropEnabled)return;isTouching(obj.x,obj.y,obj.element);if(attrs.ngDragMove){$timeout(function(){onDragMoveCallback(scope,{$data:obj.data,$event:obj});});}};var onDragEnd=function(evt,obj){if(!_dropEnabled||_myid===obj.uid){updateDragStyles(false,obj.element);return;}
if(isTouching(obj.x,obj.y,obj.element)){if(obj.callback){obj.callback(obj);}
if(attrs.ngDropSuccess){$timeout(function(){onDropCallback(scope,{$data:obj.data,$event:obj,$target:scope.$eval(scope.value)});});}}
if(attrs.ngDragStop){$timeout(function(){onDragStopCallback(scope,{$data:obj.data,$event:obj});});}
updateDragStyles(false,obj.element);};var isTouching=function(mouseX,mouseY,dragElement){var touching=hitTest(mouseX,mouseY);scope.isTouching=touching;if(touching){_lastDropTouch=element;}
updateDragStyles(touching,dragElement);return touching;};var updateDragStyles=function(touching,dragElement){if(touching){element.addClass('drag-enter');dragElement.addClass('drag-over');}else if(_lastDropTouch==element){_lastDropTouch=null;element.removeClass('drag-enter');dragElement.removeClass('drag-over');}};var hitTest=function(x,y){var bounds=element[0].getBoundingClientRect();x-=$document[0].body.scrollLeft+$document[0].documentElement.scrollLeft;y-=$document[0].body.scrollTop+$document[0].documentElement.scrollTop;return x>=bounds.left&&x<=bounds.right&&y<=bounds.bottom&&y>=bounds.top;};initialize();}};}]).directive('ngDragClone',['$parse','$timeout','ngDraggable',function($parse,$timeout,ngDraggable){return{restrict:'A',link:function(scope,element,attrs){var img,_allowClone=true;var _dragOffset=null;scope.clonedData={};var initialize=function(){img=element.find('img');element.attr('draggable','false');img.attr('draggable','false');reset();toggleListeners(true);};var toggleListeners=function(enable){if(!enable)return;scope.$on('draggable:start',onDragStart);scope.$on('draggable:move',onDragMove);scope.$on('draggable:end',onDragEnd);preventContextMenu();};var preventContextMenu=function(){img.off('mousedown touchstart touchmove touchend touchcancel',absorbEvent_);img.on('mousedown touchstart touchmove touchend touchcancel',absorbEvent_);};var onDragStart=function(evt,obj,elm){_allowClone=true;if(angular.isDefined(obj.data.allowClone)){_allowClone=obj.data.allowClone;}
if(_allowClone){scope.$apply(function(){scope.clonedData=obj.data;});element.css('width',obj.element[0].offsetWidth);element.css('height',obj.element[0].offsetHeight);moveElement(obj.tx,obj.ty);}};var onDragMove=function(evt,obj){if(_allowClone){_tx=obj.tx+obj.dragOffset.left;_ty=obj.ty+obj.dragOffset.top;moveElement(_tx,_ty);}};var onDragEnd=function(evt,obj){if(_allowClone){reset();}};var reset=function(){element.css({left:0,top:0,position:'fixed','z-index':-1,visibility:'hidden'});};var moveElement=function(x,y){element.css({transform:'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, '+x+', '+y+', 0, 1)','z-index':99999,'visibility':'visible','-webkit-transform':'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, '+x+', '+y+', 0, 1)','-ms-transform':'matrix(1, 0, 0, 1, '+x+', '+y+')'});};var absorbEvent_=function(event){var e=event;e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();e.cancelBubble=true;e.returnValue=false;return false;};initialize();}};}]).directive('ngPreventDrag',['$parse','$timeout',function($parse,$timeout){return{restrict:'A',link:function(scope,element,attrs){var initialize=function(){element.attr('draggable','false');toggleListeners(true);};var toggleListeners=function(enable){if(!enable)return;element.on('mousedown touchstart touchmove touchend touchcancel',absorbEvent_);};var absorbEvent_=function(event){var e=event.originalEvent;e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();e.cancelBubble=true;e.returnValue=false;return false;};initialize();}};}]).directive('ngCancelDrag',[function(){return{restrict:'A',link:function(scope,element,attrs){element.find('*').attr('ng-cancel-drag','ng-cancel-drag');}};}]).directive('ngDragScroll',['$window','$interval','$timeout','$document','$rootScope',function($window,$interval,$timeout,$document,$rootScope){return{restrict:'A',link:function(scope,element,attrs){var intervalPromise=null;var lastMouseEvent=null;var config={verticalScroll:attrs.verticalScroll||true,horizontalScroll:attrs.horizontalScroll||true,activationDistance:attrs.activationDistance||75,scrollDistance:attrs.scrollDistance||15};var reqAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/60);};})();var animationIsOn=false;var createInterval=function(){animationIsOn=true;function nextFrame(callback){var args=Array.prototype.slice.call(arguments);if(animationIsOn){reqAnimFrame(function(){$rootScope.$apply(function(){callback.apply(null,args);nextFrame(callback);});})}}
nextFrame(function(){if(!lastMouseEvent)return;var viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);var viewportHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var scrollX=0;var scrollY=0;if(config.horizontalScroll){if(lastMouseEvent.clientX<config.activationDistance){scrollX=-config.scrollDistance;}
else if(lastMouseEvent.clientX>viewportWidth-config.activationDistance){scrollX=config.scrollDistance;}}
if(config.verticalScroll){if(lastMouseEvent.clientY<config.activationDistance){scrollY=-config.scrollDistance;}
else if(lastMouseEvent.clientY>viewportHeight-config.activationDistance){scrollY=config.scrollDistance;}}
if(scrollX!==0||scrollY!==0){var currentScrollLeft=($window.pageXOffset||$document[0].documentElement.scrollLeft);var currentScrollTop=($window.pageYOffset||$document[0].documentElement.scrollTop);var elementTransform=element.css('transform');element.css('transform','initial');$window.scrollBy(scrollX,scrollY);var horizontalScrollAmount=($window.pageXOffset||$document[0].documentElement.scrollLeft)-currentScrollLeft;var verticalScrollAmount=($window.pageYOffset||$document[0].documentElement.scrollTop)-currentScrollTop;element.css('transform',elementTransform);lastMouseEvent.pageX+=horizontalScrollAmount;lastMouseEvent.pageY+=verticalScrollAmount;$rootScope.$emit('draggable:_triggerHandlerMove',lastMouseEvent);}});};var clearInterval=function(){animationIsOn=false;};scope.$on('draggable:start',function(event,obj){if(obj.element[0]!==element[0])return;if(!animationIsOn)createInterval();});scope.$on('draggable:end',function(event,obj){if(obj.element[0]!==element[0])return;if(animationIsOn)clearInterval();});scope.$on('draggable:move',function(event,obj){if(obj.element[0]!==element[0])return;lastMouseEvent=obj.event;});}};}]);var obtenerIdMicrositio=function(){var url=location.href;var pos=url.indexOf("ms");var id=url.substr(pos+3);var last_pos=id.indexOf("/");id=id.substr(0,last_pos);return id;};var messageAlert=function(title,text,type){swal({title:title,text:text,type:type,timer:2000,showConfirmButton:false});};var cleanString=function(cadena){var specialChars="!@#$^&%*()'+=-[]\/{}|:<>?,";for(var i=0;i<specialChars.length;i++){cadena=cadena.replace(new RegExp("\\"+specialChars[i],'gi'),'');}
cadena=cadena.toLowerCase();cadena.replace(/\s/g,"");cadena=cadena.replace(/[áàäâå]/gi,"a");cadena=cadena.replace(/[éèëê]/gi,'e');cadena=cadena.replace(/[íìïî]/gi,'i');cadena=cadena.replace(/[óòöô]/gi,'o');cadena=cadena.replace(/[úùüû]/gi,'u');cadena=cadena.replace(/[ýÿ]/gi,'y');cadena=cadena.replace(/ñ/gi,'n');return cadena;};angular.module('form.directive',[]).directive('nextOnEnter',function(){function nextForm(scope,element,attr,ctrl){element.bind('keydown',function(e){var code=e.keyCode||e.which;if(code===13){e.preventDefault();var pageElems=document.querySelectorAll('input, select, textarea'),elem=e.srcElement
focusNext=false,len=pageElems.length;for(var i=0;i<len;i++){var pe=pageElems[i];if(focusNext){if(pe.style.display!=='none'){pe.focus();break;}}else if(pe===e.srcElement){focusNext=true;}}}});}
return{link:nextForm};});(function($){"use strict";var Mask=function(el,mask,options){var jMask=this,old_value;el=$(el);mask=typeof mask==="function"?mask(el.val(),undefined,el,options):mask;jMask.init=function(){options=options||{};jMask.byPassKeys=[9,16,17,18,36,37,38,39,40,91];jMask.translation={'0':{pattern:/\d/},'9':{pattern:/\d/,optional:true},'#':{pattern:/\d/,recursive:true},'A':{pattern:/[a-zA-Z0-9]/},'S':{pattern:/[a-zA-Z]/}};jMask.translation=$.extend({},jMask.translation,options.translation);jMask=$.extend(true,{},jMask,options);el.each(function(){if(options.maxlength!==false){el.attr('maxlength',mask.length);}
el.attr('autocomplete','off');p.destroyEvents();p.events();p.val(p.getMasked());});};var p={getCaret:function(){var sel,pos=0,ctrl=el.get(0),dSel=document.selection,cSelStart=ctrl.selectionStart;if(dSel&&navigator.appVersion.indexOf("MSIE 10")===-1){ctrl.focus();sel=dSel.createRange();sel.moveStart('character',-ctrl.value.length);pos=sel.text.length;}
else if(cSelStart||cSelStart==='0'){pos=cSelStart;}
return pos;},setCaret:function(pos){var range,ctrl=el.get(0);if(ctrl.setSelectionRange){ctrl.focus();ctrl.setSelectionRange(pos,pos);}else if(ctrl.createTextRange){range=ctrl.createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}},events:function(){el.on('keydown.mask',function(){old_value=p.val();});el.on('keyup.mask',p.behaviour);el.on("paste.mask",function(){setTimeout(function(){el.keydown().keyup();},100);});},destroyEvents:function(){el.off('keydown.mask keyup.mask paste.mask');},val:function(v){var isInput=el.get(0).tagName.toLowerCase()==="input";return arguments.length>0?(isInput?el.val(v):el.text(v)):(isInput?el.val():el.text());},behaviour:function(e){e=e||window.event;if($.inArray(e.keyCode||e.which,jMask.byPassKeys)===-1){var changeCaret,caretPos=p.getCaret();if(caretPos<p.val().length){changeCaret=true;}
p.val(p.getMasked());if(changeCaret){p.setCaret(caretPos);}
return p.callbacks(e);}},getMasked:function(skipMaskChars){var buf=[],value=p.val(),m=0,maskLen=mask.length,v=0,valLen=value.length,offset=1,addMethod="push",resetPos=-1,lastMaskChar,check;if(options.reverse){addMethod="unshift";offset=-1;lastMaskChar=0;m=maskLen-1;v=valLen-1;check=function(){return m>-1&&v>-1;};}else{lastMaskChar=maskLen-1;check=function(){return m<maskLen&&v<valLen;};}
while(check()){var maskDigit=mask.charAt(m),valDigit=value.charAt(v),translation=jMask.translation[maskDigit];if(translation){if(valDigit.match(translation.pattern)){buf[addMethod](valDigit);if(translation.recursive){if(resetPos===-1){resetPos=m;}else if(m===lastMaskChar){m=resetPos-offset;}
if(lastMaskChar===resetPos){m-=offset;}}
m+=offset;}else if(translation.optional){m+=offset;v-=offset;}
v+=offset;}else{if(!skipMaskChars){buf[addMethod](maskDigit);}
if(valDigit===maskDigit){v+=offset;}
m+=offset;}}
var lastMaskCharDigit=mask.charAt(lastMaskChar);if(maskLen===valLen+1&&!jMask.translation[lastMaskCharDigit]){buf.push(lastMaskCharDigit);}
return buf.join("");},callbacks:function(e){var val=p.val(),changed=p.val()!==old_value;if(changed===true){if(typeof options.onChange==="function"){options.onChange(val,e,el,options);}}
if(changed===true&&typeof options.onKeyPress==="function"){options.onKeyPress(val,e,el,options);}
if(typeof options.onComplete==="function"&&val.length===mask.length){options.onComplete(val,e,el,options);}}};jMask.remove=function(){p.destroyEvents();p.val(jMask.getCleanVal()).removeAttr('maxlength');};jMask.getCleanVal=function(){return p.getMasked(true);};jMask.init();};$.fn.mask=function(mask,options){return this.each(function(){$(this).data('mask',new Mask(this,mask,options));});};$.fn.unmask=function(){return this.each(function(){try{$(this).data('mask').remove();}catch(e){}});};$.fn.cleanVal=function(){return $(this).data('mask').getCleanVal();};$('*[data-mask]').each(function(){var input=$(this),options={};if(input.attr('data-mask-reverse')==='true'){options.reverse=true;}
if(input.attr('data-mask-maxlength')==='false'){options.maxlength=false;}
input.mask(input.attr('data-mask'),options);});})(window.jQuery||window.Zepto);