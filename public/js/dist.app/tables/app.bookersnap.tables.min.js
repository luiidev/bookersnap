
var obtenerIdMicrositio=function(){var url=location.href;var pos=url.indexOf("ms");var id=url.substr(pos+3);var last_pos=id.indexOf("/");id=id.substr(0,last_pos);return id;}
var idMicrositio=obtenerIdMicrositio();angular.module('tables.app',['turn.app','zone.app',]).constant("ApiUrl",'http://web.aplication.bookersnap/v1/en/admin/ms/'+idMicrositio+'/mesas');angular.module('turn.app',['turn.controller','turn.service','turn.directive']).config(function($stateProvider,$urlRouterProvider){$stateProvider.state('turn',{url:'/turn',templateUrl:'/js/app/tables/turn/view/index.html'}).state('turn.active',{url:'/turn-active',templateUrl:'/js/app/tables/turn/view/turn-active.html'}).state('turn.inactive',{url:'/turn-inactive',templateUrl:'/js/app/tables/turn/view/turn-inactive.html'})});angular.module('turn.controller',[]).controller('TurnCtrl',function($scope){});angular.module('turn.directive',[]);angular.module('turn.service',[]);angular.module('zone.app',['zone.controller','zone.service','zone.directive']).config(function($stateProvider,$urlRouterProvider){$stateProvider.state('zone',{url:'/zone',templateUrl:'/js/app/tables/zone/view/index.html'}).state('zone.active',{url:'/zone-active',templateUrl:'/js/app/tables/zone/view/zone-active.html'}).state('zone.inactive',{url:'/zone-inactive',templateUrl:'/js/app/tables/zone/view/zone-inactive.html'}).state('zone-create',{url:'/zone/config/new',templateUrl:'/js/app/tables/zone/view/zone-create.html'}).state('zone-edit',{url:'/zone/config/edit',templateUrl:'/js/app/tables/zone/view/zone-edit.html'})});angular.module('zone.controller',[]).controller('ZoneCtrl',function($scope,ZoneFactory){$scope.zonesActive={};$scope.zonesInactive={};$scope.getZones=function(){ZoneFactory.getZones().success(function(data){var vZonesActive=[];var vZonesInactive=[];angular.forEach(data,function(zones){var zonesTables=getTablesCount(zones);if(zones.status=="0"||zones.status=="2"){vZonesInactive.push(zonesTables);}else{vZonesActive.push(zonesTables);}});$scope.zonesActive=vZonesActive;$scope.zonesInactive=vZonesInactive;});};var getTablesCount=function(zones){var vTables=0;angular.forEach(zones.tables,function(tables){vTables+=1;});zones.tables_count=vTables;return zones;};$scope.getZones();});angular.module('zone.directive',[]);angular.module('zone.service',[]).factory('ZoneFactory',function($http,ApiUrl){return{getZones:function(vData){return $http.get(ApiUrl+"/zone");}};});angular.module('bookersnap',['tables.app']);